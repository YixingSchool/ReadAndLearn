

```sh
### 1 在主库上，阻塞主数据库的所有更新操作
FLUSH TABLES WITH READ LOCK;
### 2 输出日志名和偏移量
SHOW MASTER STATUS;
+---------------+----------+--------------+------------------+-------------------+
| File          | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set |
+---------------+----------+--------------+------------------+-------------------+
| binlog.000004 |      154 |              |                  |                   |
+---------------+----------+--------------+------------------+-------------------+
1 row in set (0.00 sec)
### 3 在从库上，输入select语句会阻塞直到从库达到指定的日志文件和偏移量，返回0同步，返回-1超时退出
select master_pos_wait('binlog.000004','154');
+----------------------------------------+
| master_pos_wait('binlog.000004','154') |
+----------------------------------------+
|                                      0 |
+----------------------------------------+
1 row in set (0.00 sec)
### 4 在主库上，允许主库重新开始处理更新
UNLOCK TABLES;
```