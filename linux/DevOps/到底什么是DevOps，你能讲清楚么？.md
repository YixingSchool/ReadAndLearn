到底什么是DevOps，你能讲清楚么？ http://www.trystack.cn/Articles/DevOps.html

到底什么是DevOps，你能讲清楚么？
2016 05 27 作者trystack

解释DevOps，并不可能用词条里的一句“开发＋运维”敷衍了事了。 
那么如何向不了解的人们解释它？

DevOps是一项运动，DevOps是一种模式，DevOps是开发和运维的合作。DevOps是一种组织的方式，DevOps是持续的学习。 
DevOps难以概括，领导者很难提出一个明确的路线图，用以在他的组织中采用DevOps。DevOps的意义是和情境高度相关的，不存在可以依从的，有规范做法的主流方法论。 
然而，运营良好的组织，展示出了相似的行为模式、组织方式并提升了效率。

长篇预警！详解DevOps,请耐心阅读

Faster, Smarter DevOps

是否能称为DevOps，取决于你是不是关注更快更多地发布代码，并保证代码在一个较高的质量，相应的交付链和交付流程将很像DevOps。但是对于当下的开发团队，无论他们想达到多快的（开发）速度，持续交付必须要有明确的计划以保证完成。

将发行节奏从每月调整到每星期，并不能仅仅通过学习敏捷式方法和利用一些自动化工具来实现。它涉及到人，工具和一个转移计划。我将探讨一些收益和实现的方法。

Waterfall到敏捷，敏捷到持续集成，持续集成到持续部署。不管你流程如何制定，主题都是相同的：找一个方法，让代码更快地为客户服务，并且不牺牲质量。但是速度和质量往往是相悖的。进展地越快意味着事情往往更容易崩坏，并且当我们仅考虑DevOps的发行部分时，就非常容易陷入这个“陷阱”中。

speed
已建立的开发商店并不能从一个flow跳转到另一个。除非你开启一个新的网络，我们的目标是引入新的程序的同时，不用因一次性的转移工作，推迟3个月或更长的时间发布新版本。这往往使用一个同时涵盖了自下而上的策略和自上而下的监管和文化的钳形方法。

然而，因为采用DevOps的工具非常容易，目前的趋势往往是仅聚焦在策略上，并自下而上的采用，而不考虑整个流水线。这样的后果是自动发布工具支配了你的交付链，并且你没有任何其他方法。以下是往往被那些没有做合适计划的团队就开始踩“油门”的团队所忽略的几类关键要素。

结构化的自动化

DevOps需要自动化。但是往往被忽略的是维持和调试整个交付链的自动化。需要考虑的，如管理，工件分配和库存，指标和安全性必须具备。如果一个组织为所有新的自动化和如何让它们符合流水线的编排建立了一个审核程序，那么新的自动化将能够长久支持和适应整个系统。 
举个例子，许多组织实施DevOps的过程中已经遇到了如何将安全或管理团队纳入的挑战。长久以来，这些团队并不属于dev和ops的范畴并且他们的工序和dev或ops并不同步。许多组织面临的挑战是如何制定人员、工序和技术支持有效结合在一起的最佳方式，保证一切工作不会减速或停滞。最优秀的组织正在寻找新的办法－通过将手工、异步的方法改变为在生命周期中，更早地实现同步加工，使安全和规则团队的政策自动化。

让我们了解一个应用安全的例子。众多在“应用安全”战场的技术厂商都将“自动化”作为他们解决方案的核心以更好地适应DevOps工具链，并以此作为卖点。在某些情况下，自动化意味着机器以线速全权负责了监控，分析和修复安全漏洞与隐患。而在其他情况中，自动化意味着人工工作流的简易化，毕竟重复出现的数小时甚至数天的异步报告不符合持续运营。而这2种情况中，在技术上可能达到一样的目的，但是它们方法却截然不同。

同时，安全专业人员可能创造一个支持异步研究的解决方案，而余下的方案会给开发者提供同步支持，并创建SDLC台。建立一个审查程序可以帮助确定某个团队或程序所需求的自动化等级是否能够在资源投入开始前，真正地落地。同时值得注意的是种种费解往往会和“自动化”、“集成”、“配置”和“持续”挂钩。

speed
共同语言

我们开如此多的回忆，有部分原因是我们说的并不是同一种语言。即使你可以理解其他方面的软件交付链，也不意味着每个团队（QA，开发，运维）说的是同一种语言。而时间就被浪费在协调这个差异上。其实这并不难解决。慎重行事。建立一个手册并统一用于流水线和应用的新部分的工具中的技术术语。

我采纳过的一种建立共同语言的方式是分享一个通俗易懂的故事。在和CIO最近开的一个会议当中，他告诉我，他的目标是要改变一个多样化的50人团队，让他们在DevOps的规则下运营，但是他们缺乏共同理解，以开始协作。我建议他为团队中的每个人购买了一册《The Phoenix Project》并要求他们去阅读。这本书中描述了一个多样化团队在将自身转化到DevOps工作中的努力，挑战，挫折和成就。

举例来说，组织可以依照上书中的方法来规划他们的DevOps转型。他们可以讨论他们的组织需要管理的“三个路径”：

第一个路径：理解工作流”从左到右”的进程，理解它是如何从开发到运维再到客户的；

第二个路径：确保在整个价值流程中，“从右到左”的持续反馈；

第三个路径：创建、培养不断实验、持续学习的文化。

读者也可以获得对书中描述的以下四种工作类型的共识：商业项目、内部IT项目、变更和计划外或修复工作。

使用这样的描述提供了沟通基础和共同词汇，促进理解、共同合作和规划未来。

speed
共同目标

如果整个团队所有的人都应对软件交付负责没有一个共同的目标，那么目标的分歧将会导致战略分歧和延迟交付。这就导致作茧自缚，例如：

如果开发不对QA中的bug负责，他们将能够更快的提交功能，但交付会因为新的问题减缓。相反的，如果过度鼓励QA团队发现和解决大量的问题，不必要的工作可能不会过度进入系统；或者
如果运营团队没有因发布的频率而调动起来，他们不会考虑全栈部署，因为这可能带来潜在的风险；或者
如果安全团队依赖于花费四小时完成的自动化测试，然而开发团队每小时都在发布新版本，一些应用的安全审查可能永远不会发生。
speed
流水线和业务指标

如果你不监测版本进程（构建、速度、部署、漏洞等），那你将无法如何在未来找到提高代码发布速度和质量的方法。但是流水线的指标并不单纯——它涉及整个团队。 现代化工具的优点在于它能够为你收集数据和指标，但它依赖团队找出有价值的那部分。来源于工具或进程监测的指标，可以帮助团队在工作和目标上达成共识。围绕进行中的工作，部署频率，更新时间的保障，恢复以及高频客户事件的效率提高，来共享指标。追踪和共享这些指标可以帮助组织更好地找到他们系统和工作的局限之处，并针对性的优化。

这就是说，你需要专注于能够驱动企业成功的正确指标。指标可以帮助你在大方向上，掌握企业是否正在正确的轨道上，从事客户最关心的事情。Deming称之为“对系统的理解”。几个可以考虑流水线和业务指标：

你的整套工作（如，版本建设，新功能发布，实施质量，安全监测，咨询应答）是否能运行得足够快？
你在创新上花的时间相比维护/重的工作多了几个百分比？
在你的DevOps流程中，人工/异步vs自动/持续性所花的时间？
你的用户基数扩大了还是缩小了？你的客户有为你的解决方案投入了更多资金么？
你的顾客是否在他们期望的时间内获得了想要的结果？
你是否或多或少的获得了新的客户/支持已有客户？
质量战略

质量不应到时候才考虑。最好的开发运营是使质量成为每个人的责任，并且QA一个战略和自动化法则，而非具体方法。质量远远不止是回归测试和基础单元测试.它还包括:

流水线的质量
组件的质量和安全性（例如，二进制文件、镜像、工具）
测试驱动的开发（在实施前测试新功能）
行为驱动的测试和开发
持续提供bugs抓取的方法，意味着测试的覆盖面不断增长而bug不断减少。它也意味着如果你拥有一个尽心尽责的QA团队，能够和运维和开发人员进行开放式的交流，那么他们将增加在讨论质量问题时的地位。

speed
计划，跨越和成功


由慢到快最好的方法，由以下这些工作组成：

1.制定计划。这不是指放在抽屉的10页文件。建立覆盖问题、解决方案和清晰目标的高效模式。该模式不应是一成不变的，而应建立一个敏捷型的方式。将战略想做代码－也许类似于walking skeleton的方法。直到你认真考虑和讨论了整个流程，才可能抓住所有的可变因素。事情总是比想像中的复杂。如果你曾今建立过一个MVP(minimum viable product)，你就会明白我的意思。

2.清除障碍。不要在你建立了一个新的程序后，才考虑管理和变更控制。这需要从第一天就开始思考。并且以此开始建立自动化。流水线的速度受限于最慢的关口。在很多组织中，这就是管理法则。所以，利用可以检查组件安全漏洞，验证许可证和维持整个版本建立和加工的审计跟踪的工具，清除你管理中的障碍。

3.扩散速赢。为了激发工作热情并获得一些成果，选择交付链中的一个面，将之做好。所选的应该是相对低风险和高价值的。一旦你完成了，利用收益影响整个团队。这些“速赢”会使每个人感到振奋。而且为接下去的目标提供了方向。持续集成——由于有非常棒的工具——让你可以清晰地，在整个团队范围内着手去做，并带来显著效果。（但是不要自欺欺人地仅仅实施Jenkins, Bamboo或是其他CI平台。团队成员应该频繁地集成他们的工作，每次集成需要提供质量和稳定性的快速反馈。）

你的环境是由其中所有个体形成的独一无二的组合。没有一个万用的标准。但是请关注我在前文所提出的模块，它们会有利于将当前的运营转变为一个有固定Sprint周期，并最终，实现持续交付乃至部署。

最后我要给出的建议是，加入到你所属的社区中。全球范围内，有非常多DevOps的讨论会和超过1750的DevOps meetups。在你读完本文后，找出你区域中的meetup，然后出席活动。这样的网络机遇，公开的活动时间与地点，meetup分享的议题是无价的。

但是，也不要仅停留在参加活动，利用这样的机会去与当地内已经实施DevOps的人建立联系，看看他们是不是会邀请你去他们的组织，现场参观半天或一天。在社区中，这种方式会比你想象的普遍的多，并且能为你带来无法从网络文献和会议议题中获得的非常有价值的直观学习的机会。

speed
对于现代社会的开发，仅仅加快速度比采取能够保障未来成功的正确的敏捷方案要简单的多。意识到花时间去创建和执行计划以让敏捷性处在合适的等级上是非常重要的，这将比仅建立一个追求速度的开发计划高效的多。

关于作者 
Derek Weeks，Sonatype副总裁，DevOps拥护者。2015年，他做出了最大型，最全面的软件支持链实践分析，其数据来源于106000个开发型组织。作为一个有超过20年软件行业的资深专家，他已经为世界前列的公司提供了众多IT提升的方案和实践。

本文译自infoq