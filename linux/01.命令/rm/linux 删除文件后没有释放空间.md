
linux 删除文件后没有释放空间 - M-zone - ITeye博客 
http://alfred-long.iteye.com/blog/2109446

测试服务器磁盘空间占满
通过 du -h --max-depth=1 / 查看每个目录的大小
找到某个巨型的log文件，于是对log文件进行删除。然后发现，df -lh 磁盘空间占用率依然100%

未释放磁盘空间原因：

在Linux或者Unix系统中，`通过rm或者文件管理器删除文件将会从文件系统的目录结构上解除链接(unlink)`.然而如果文件是被
打开的（有一个进程正在使用），那么进程将仍然可以读取该文件，磁盘空间也一直被占用。而我删除的是正在运行的某个进程产生的log文件，删除的时候文件应该正在被使用
解决方法：
获得一个已经被删除但是仍然被应用程序占用的文件列表

yum install -y lsof
`lsof |grep deleted`

查看

最后，停掉那个进程，空间磁盘被释放..