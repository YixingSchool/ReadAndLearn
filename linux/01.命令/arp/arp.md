

# Linux服务架设篇--arp命令

* [Linux服务架设篇--arp命令 - 孩纸有点硬 - 博客园 ](http://www.cnblogs.com/tuokid/p/4548482.html)


ARP(Address Resolution Protocol)

ARP，地址解析协议。在以太局域网中，主机之间交换数据帧时，是通过MAC地址进行的。因此，当以太网的一台主机向另一台IP地址的主机发送数据包时，它需要知道目的IP地址所对应的MAC地址，才能把这个IP数据包发送过去。

## 工作过程：

主机A（192.168.0.10）向主机B（192.168.0.20）发送一个IP数据包，主机A需要把这个IP数据包封装在以太数据帧中才能发送，此时需要知道主机B的MAC地址。如果主机A不知道主机B的MAc地址，它就会在网络上发送一个`广播数据帧`，其目标MAC地址是广播地址“FF.FF.FF.FF.FF.FF”。相当于在本地局域网询问：“192.168.0.20的MAC地址是什么”。同一子网下的所有主机都会收到数据帧，但只有B收到数据帧会回复数据帧，内容相当于：“192.168.0.20的MAC地址是12-22-3e-34-4r-6d”。

## ARP缓存：

通常，每台主机都会有自己的**ARP缓存，其存放着各IP地址所对应的MAC地址**，发送数据包时，先检查ARP缓存是否有IP地址与MAC地址的相应记录，若没有，才会进行ARP解析。

ARP缓存条目分为静态和动态两种，静态条目由管理员指定，其固定不变。动态条目，在一定时间内如果缓存表中的某一条目没有被使用，将会自动删除。另一方面，当IP地址与MAC地址对应关系改变时，能及时更新。

 
# Linux arp命令

* [Linux arp命令 - 红孩儿你好 - 博客园 ](http://www.cnblogs.com/274914765qq/p/5289195.html)

## 一、简介

arp命令用于操作主机的arp缓冲区，可以用来显示arp缓冲区中的所有条目、删除指定的条目或者添加静态的ip地址与MAC地址对应关系。



## 二、语法

```sh
-a<主机>：显示arp缓冲区的所有条目；
-H<地址类型>：指定arp指令使用的地址类型；
-d<主机>：从arp缓冲区中删除指定主机的arp条目；
-D：使用指定接口的硬件地址；
-e：以Linux的显示风格显示arp缓冲区中的条目；
-i<接口>：指定要操作arp缓冲区的网络接口；
-s<主机><MAC地址>：设置指定的主机的IP地址与MAC地址的静态映射；
-n：以数字方式显示arp缓冲区中的条目；
-v：显示详细的arp缓冲区条目，包括缓冲区条目的统计信息；
-f<文件>：设置主机的IP地址与MAC地址的静态映射。
```
 

## 三、实例

```sh
#1）查看arp缓存
arp -nv
#2）添加arp缓存条目
arp -s 10.1.1.1 00:11:22:33:44:55:66
#3）删除arp缓存条目
arp -d 10.1.10.118
#4）指定回复的MAC地址
arp -i eth0 -Ds 10.0.0.2 eth1 pub
#提示：当eth0收到IP地址为10.0.0.2的请求时，用eth1的MAC地址应答
``` 

参考：http://blog.chinaunix.net/uid-9525959-id-3318814.html