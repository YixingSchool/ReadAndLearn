1. https://help.aliyun.com/product/25365.html


# 1. 产品简介
## 1.1 什么是云服务器ECS
https://help.aliyun.com/document_detail/25367.html
[地域和可用区](https://help.aliyun.com/document_detail/40654.html)
> 地域是指物理的数据中心。可用区是指在同一地域内，电力和网络互相独立的物理区域。
* 地域是指物理的数据中心。资源创建成功后不能更换地域。
> 可用区
* 可用区是指在同一地域内，电力和网络互相独立的物理区域。同一可用区内实例之间的网络延时更小。
* `在同一地域内可用区与可用区之间内网互通，可用区之间能做到故障隔离`。是否将实例放在同一可用区内，主要取决于对容灾能力和网络延时的要求。
* 如果您的应用需要较高的容灾能力，建议您将实例部署在同一地域的不同可用区内。
* 如果您的应用要求实例之间的网络时延较低，则建议您将实例创建在同一可用区内。
## 1.2 云服务器ECS的优势
https://help.aliyun.com/document_detail/51704.html

|对比项  |云服务器                              |传统IDC                               |
|-------|--------------------------------------|-------------------------------------|
|容灾备份|多份数据副本，单份损坏可在短时间内快速恢复|用户自行搭建，使用传统存储设备，价格高昂|
|       |用户自定义快照                          |没有提供快照功能，无法做到自动故障恢复 |
|       |快速自动故障恢复	                     |数据损坏需用户自己修复                |
## 1.3 应用场景
https://help.aliyun.com/document_detail/25371.html
## 1.5 实例
### 1.5.2 实例生命周期
https://help.aliyun.com/document_detail/25380.html
状态	状态属性	API的对应状态
准备中	中间状态	Pending
启动中	中间状态	Starting
运行中	稳定状态	Running
停止中	中间状态	Stopping
已停止	稳定状态	Stopped
已过期	`稳定状态`	Stopped
即将过期	稳定状态	Stopped
已锁定	`稳定状态`	Stopped
等待释放	稳定状态	Stopped
## 1.6 块存储
### 1.6.4 云盘三副本技术
https://help.aliyun.com/document_detail/35108.html
> 如果ECS实例由于病毒感染、人为误删除或黑客入侵等软故障原因造成数据丢失，`需要采用备份、快照 等技术手段来解决`。
## 1.7 网络和安全性 
### 1.6.4 专有网络的IP
https://help.aliyun.com/document_detail/44441.html
### 1.7.8 安全组
https://help.aliyun.com/document_detail/25387.html
安全组是一个逻辑上的分组，这个分组是由同一个地域（Region）内具有相同安全保护需求并相互信任的实例组成。`每个实例至少属于一个安全组`，在创建的时候就需要指定。`同一安全组内的实例之间默认私网网络互通，不同安全组的实例之间默认私网不通。可以授权两个安全组之间互访`。
每个用户在每个地域最多可创建100个安全组，并可以根据用户会员等级的提高而增加。
一个实例中的每个弹性网卡都默认最多可以加入5个安全组。
> 安全组规则和限制
  * 安全组规则可以允许或者禁止安全组内的云服务器ECS实例的公网和内网的入出方向的访问。
  * `您可以随时添加和取消安全组规则`。您的安全组规则变更会自动应用于安全组内的ECS实例上。
### 1.7.10 DDoS基础防护
https://help.aliyun.com/document_detail/55256.html
> 在使用DDoS基础防护时，您需要设置以下阈值：
  * BPS(每秒处理的流量值)清洗阈值：当入方向流量超过BPS清洗阈值时，会触发流量清洗。
  * PPS(每秒处理的报文数量)清洗阈值：当入方向数据包数超过PPS清洗阈值时，会触发流量清洗。
## 1.8 快照
### 1.8.1 快照概述
https://help.aliyun.com/document_detail/25391.html
### 1.8.2 原理介绍
https://help.aliyun.com/document_detail/25392.html
每块磁盘的第一份快照是全量快照，耗时较长。之后再对同一块磁盘创建快照时，都是增量快照，耗时较短。创建一份快照需要的时间取决于需要备份的数据量。
### 1.8.5 应用场景
https://help.aliyun.com/document_detail/25395.html
### 1.8.6 快照服务费用细则（按量后付费）
https://help.aliyun.com/document_detail/56159.html
# 2. 产品定价
## 2.1 计费概述
https://help.aliyun.com/document_detail/25398.html
> 云盘：`随实例一起创建的云盘，计费方式与实例相同`。`单独创建的云盘，只支持 按量付费`，但是，`实例创建后，您可以通过 按量付费转预付费 或者 升级配置 等功能`将挂载在实例上的云盘计费方式转为包年包月，和实例的生命周期保持一致。
## 2.3 按量付费
https://help.aliyun.com/knowledge_detail/40653.html
## 2.5 按量付费转预付费
https://help.aliyun.com/knowledge_detail/49884.html
> 限制
  * 您每次`最多只能将20个按量付费实例`转换为包年包月或按周付费实例。
> 待转换的ECS实例需要满足以下条件：
  * 不能是 系列I实例规格，也不能是 n1、n2、e3实例规格族 中的任一种实例规格。
  * 不能是 抢占式实例。
  * 不能有未完成的转换订单。
    * 如果实例有未支付的转换订单，您必须作废这个未支付的订单后才能执行新的转换操作。
  * 没有设置 自动释放时间。
    * 如果实例已经设置过自动释放时间，您必须先关闭自动释放设置才能进行转换操作。
  * 归属于您的账号下。
  * 状态为 运行中 或 已停止。
    * 如果您在ECS实例处于 `运行中 或 已停止` 时下单成功，但是在支付未完成时实例状态发生了变化不再处于上述状态，支付会失败，从而导致计费方式转换失败。当实例重新处于上述状态时，您可以去订单中心重新支付这个订单。
# 3. 个人版快速入门 
## 3.6 步骤 4：格式化数据盘 
### 3.6.1 Windows 格式化数据盘
https://help.aliyun.com/document_detail/25418.html
> 如果在创建Windows实例时配了数据盘，您需要先格式化并分区数据盘后才能正常使用数据盘。
> 本文仅适用于不大于 2 TiB 的数据盘，大于 2 TiB 的数据盘，请参考 分区格式化大于2 TiB云盘。
> `云服务器 ECS 仅支持对 数据盘 进行分区，而不支持对 系统盘 进行分区`。如果您强行使用第三方工具对系统盘进行分区操作，可能引发未知风险，如系统崩溃、数据丢失等。
> 操作须知
  * 单独 购买的数据盘 需要先 `挂载数据盘`，然后才能进行格式化和分区操作。
  * `随实例时一起购买的数据盘，无需挂载`，直接格式化并分区。
# 5. 用户指南
## 5.2 ECS 使用须知
https://help.aliyun.com/document_detail/25430.html
> Linux 操作系统须知
  * `不要开启 SELinux`
  * 不要修改 Linux 实例默认的 /etc/issue 文件内容。否则，根据实例创建的自定义镜像的系统发行版本无法被正确识别，使用该镜像创建的实例无法正常启动。
  * `对于 4 GiB 以上内存的云服务器，请选择 64 位操作系统`，因为 32 位操作系统存在 4 GiB 的内存寻址限制
  * 不要随意更改根目录所在分区下各个目录的权限，尤其是 /etc、/sbin、/bin、/boot、/dev、/usr和 /lib 等目录的权限。如果权限更改不当会导致系统出现异常。
  * 不要重命名、删除或禁用 Linux下的 root 账号。
  * 不要编译 Linux 系统的内核，或对内核进行任何其他操作。
  * 如果您使用普通云盘，不建议使用 swap 分区。如果是高效云盘或 SSD 云盘，可以根据实际情况使用 swap 分区。
  * `不要开启 NetWorkManager 服务。该服务会跟系统内部网络服务出现冲突，导致网络异常`。
  * 请谨慎使用root等管理账号进行fio、mkfs、fsck、扩容等操作，避免误操作引起的数据受损。
## 5.3 使用限制
https://help.aliyun.com/document_detail/25412.html
## 5.4 实例
### 5.4.1 创建实例
> [使用自定义镜像创建实例](https://help.aliyun.com/document_detail/25465.html)
> [使用向导创建实例](https://help.aliyun.com/document_detail/87190.html)
  * 说明
    * 实例创建完成后，`不可更改地域和可用区`。
    * 部分实例规格族并不是全地域提供。详细信息，请参见 创建GPU计算型实例、创建f1实例、创建f2实例、创建超级计算集群 SCC 实例 和 创建弹性裸金属服务器。
### 5.4.5 升降配
1. [升降配概述](https://help.aliyun.com/document_detail/25437.html)
> 预付费：
* 升级实例配置：使用 预付费实例升级配置 功能随时升级实例规格。`操作完成后，您必须 重启实例 或使用 RebootInstance 接口重启实例，新配置才能生效`。适用于包年包月实例和按周付费实例。
* 降低实例配置：使用 续费降配 功能，在续费的同时降低实例规格。进入新计费周期后，您需要在7天内在控制台 重启实例 使新的实例规格生效。适用于包年包月实例和按周付费实例。
> 按量付费：
* 使用 按量付费实例变更实例规格 功能修改按量付费实例的配置。您必须先停止实例才能使用这个功能。
3. [按量付费实例变更实例规格](https://help.aliyun.com/document_detail/60051.html)
> 变更按量付费实例的规格有以下限制：
* 两次变更操作之间的间隔不得少于5分钟。
* `不支持实例规格族内或规格族之间变更的包括`：d1、d1ne、i1、i2、ga1、gn5、f1、f2、f3、ebmc4、ebmg5、sccg5和scch5。`支持变更的规格族以及变配规则请参见 变配规格表`
4. [临时升级带宽](https://help.aliyun.com/document_detail/59717.html)
### 5.4.10 释放实例
https://help.aliyun.com/document_detail/25442.html
### 5.4.12 修改IP地址
1. [修改私有IP地址_修改IP地址](https://help.aliyun.com/document_detail/27733.html)
> 您可以`直接修改专有网络中ECS实例的私网IP`，也可以通过`更改ECS实例所属的交换机`来更改ECS实例的私网IP。
> 操作
  * 在目标实例的 操作 列中，单击 更多 > 停止。
  * `实例停止运行`后，单击目标实例的ID，进入 实例详情 页面。
  * 在 配置信息 区域，单击 更多 > 修改私网IP。
  * 在 修改私网IP 对话框，选择要更换的交换机，然后单击 修改
2. [更换公网IP地址](https://help.aliyun.com/document_detail/67236.html)
> 要访问公网，需要开启公网带宽或者绑定EIP。
> 更换分配的公网IP地址有以下限制：
  * 实例必须分配了公网IP地址，即在 实例列表 里，实例的 IP地址 列会显示公网IP地址
  * 如果在创建预付费实例时未分配公网IP地址，实例创建成功后，您可以通过`升降公网带宽配置分配公网IP地址`，更多信息，请参考 升降配概述
  * 如果在创建按量付费实例时未分配公网IP地址，实例创建成功后，`无法再分配公网IP地址，只能 绑定弹性公网IP（EIP）地址`
## 5.6 云盘
### 5.6.2 用快照创建云盘
https://help.aliyun.com/document_detail/32317.html
* 新建的高效云盘和SSD云盘，一旦创建成功便可以达到其容量所对应的最高性能，不需要预热的过程。但是，因为快照存储在对象存储（OSS）里，使用快照创建云盘时，ECS需要从OSS取回数据并写入到云盘，这个过程需要一段时间，而且会造成首次访问时性能下降。建议您在正式使用这类云盘前，先读取云盘上所有数据块，从而避免初期的性能下降。
* 用快照创建磁盘
### 5.6.3 挂载云盘
https://help.aliyun.com/document_detail/25446.html
> 在挂载云盘前，您需要了解以下注意事项：
  * 随实例一起创建的云盘，不需要执行挂载操作。
  * 您只能挂载作数据盘用的云盘，不需要挂载作系统盘用的云盘。
  * 挂载云盘时，实例必须满足以下条件：
    * 实例状态必须为 `运行中（Running）或者 已停止（Stopped），不能为 已锁定（Locked）`。
    * 实例不欠费。
    * 挂载云盘时，云盘的状态必须为 `待挂载（Available）`。
    * 云盘只能挂载到`同一地域下同一可用区内`的实例上，`不能跨可用区挂载`。
    * 一台ECS实例`最多能挂载16块云盘`作数据盘用，`同一时刻，一块云盘只能挂载到一个台实例上`。
    * 独立创建的云盘能挂载到同一地域下同一可用区的任意实例上（包括预付费和按量付费的实例）。
### 5.6.4. 分区格式化大于2 TiB云盘
https://help.aliyun.com/document_detail/34377.html
> 如果您要分区格式化一块大于2 TiB的作数据盘用的云盘（本文统一称为 大容量数据盘，小于2 TiB的数据盘统称为 小容量数据盘），`您必须采用GPT分区形式。`
### 5.6.6 扩容云盘
#### 5.6.6.2 扩容系统盘
https://help.aliyun.com/document_detail/44986.html
> 更换系统盘存在如下风险：
  * 更换系统盘需要停止实例，因此会中断您的业务。
  * 更换完成后，您需要在新的系统盘中重新部署业务运行环境，有可能会对您的业务造成长时间的中断。
  * 更换系统盘是`重新为您的实例分配一个系统盘，云盘ID会改变`，所以`基于旧的系统盘创建的快照将不能用于回滚新的系统盘`。
  * 更换系统盘后，您手动创建的快照不受影响，您仍可以用这些快照创建自定义镜像。如果您为旧的系统盘设置了自动快照策略，而且设置了自动快照随云盘释放，则自动快照策略不再适用于新的系统盘，而且，`旧系统盘的自动快照会自动删除`。
> 更换系统盘时，您需要注意以下信息：
  * 更换系统盘后，您的实例会被分配一个新的系统盘，系统盘ID会更新，原系统盘被释放。
  * 您不能更换系统盘的云盘类型。
  * 扩容后的系统盘，容量最小为扩容前的容量，最大为500 GiB。不能缩小系统盘的容量。
  * `Windows 2003不支持系统盘扩容`。
  * 如果您的包年包月实例做过 续费降配 操作，进入下一个计费周期前，您不能修改系统盘容量。
  * 实例的IP地址和MAC地址不变。
### 5.6.6.3 扩容数据盘_Windows
https://help.aliyun.com/document_detail/25451.html
随着业务的增长，您的数据盘容量可能无法满足数据存储的需要，这时您可以使用 磁盘扩容 功能扩容数据盘。
> 说明:
  * 建议在扩容数据盘之前手动创建快照，以备份数据。
  * 无论数据盘的状态是 `待挂载 还是 使用中`，都可以执行磁盘扩容操作。
  * `如果数据盘正在创建快照`，则不允许执行扩容数据盘的操作。
  * 包年包月实例如果做过 续费降配 操作，`当前计费周期的剩余时间内`，实例上的包年包月云盘`不支持`扩容磁盘操作。
  * 扩容磁盘只是`扩大数据盘容量`，而`不是扩容文件系统`。
  * 磁盘扩容只能扩容数据盘，不能扩容系统盘或本地盘（本地 SSD 盘等）。
  * 挂载在实例上的数据盘，只有`当实例处于 运行中 (Running) 或 已停止(Stopped) 状态`时才可以扩容。扩容这种数据盘需要在控制台上`重启实例后才能使扩容后的容量生效`，而重启实例会使您的实例停止工作，从而中断您的业务，所以请您谨慎操作。
### 5.6.10 更换系统盘
https://help.aliyun.com/document_detail/50134.html
> 更换系统盘后，
  * 您的实例会被分配一个新的系统盘，`系统盘ID会更新`，原系统盘被释放。
  * 系统盘的云盘类型不能更换。
  * 实例的`IP地址和MAC地址不变`。
  * 为了保证有足够的快照额度完成新系统盘的自动快照策略，您可以 删除不需要的旧系统盘快照。
> 更换系统盘存在如下风险：
  * 更换系统盘需要`停止实例`，因此会中断您的业务。
  * 更换完成后，您需要在新的系统盘中重新部署业务运行环境，有可能会对您的业务造成长时间的中断。
  * 更换系统盘相当于重新为您的实例分配了一个系统盘，磁盘ID会改变，所以`基于旧的系统盘创建的快照将不能用于回滚新的系统盘`
  * `更换系统盘后，您手动创建的快照不受影响，您仍能用这些快照创建自定义镜像`。
  * 如果您为旧的系统盘设置了自动快照策略，而且设置了自动快照随磁盘释放，则自动快照策略不再适用于新的系统盘，而且，`旧系统盘的自动快照会自动删除`。
> 跨操作系统更换时，数据盘的文件系统格式可能会无法识别。
  * Windows系统更换为Linux系统：需要单独安装软件识别，例如NTFS-3G等，因为Linux缺省情况下无法识别NTFS格式。
  * Linux系统更换为Windows系统：需要单独安装软件识别，例如Ext2Read、Ext2Fsd等，因为Windows卸省情况下无法识别ext3、ext4、XFS等文件系统格式。
## 5.7 快照
### 5.7.3 为磁盘设置自动快照策略
https://help.aliyun.com/document_detail/25457.html
自动快照的命名格式为：auto_yyyyMMdd_1，比如 auto_20140418_1
### 5.7.5 删除快照和自动快照策略
https://help.aliyun.com/document_detail/25458.html
> 说明
  * 快照删除后，不能用任何方法恢复。请谨慎操作。
  * 如果快照用于制作自定义镜像，需要先删除关联的镜像，然后才能删除。
### 5.7.6 查看快照容量
https://help.aliyun.com/document_detail/54789.html
## 5.8 镜像
### 5.8.1 创建自定义镜像
1. [使用快照创建自定义镜像](https://help.aliyun.com/document_detail/25460.html)
您可以使用快照创建自定义镜像，将快照的操作系统、数据环境信息完整的包含在镜像中。然后使用自定义镜像创建多台具有相同操作系统和数据环境信息的实例，非常方便的复制实例
快照 -> 镜像 -> 实例
> Linux实例注意事项
  * 在使用Linux实例的系统盘创建自定义镜像时，`不要`在 /etc/fstab 文件中`加载数据盘的信息`，否则使用该镜像创建的实例无法启动。
  * 强烈建议您在制作自定义镜像前 umount Linux实例上挂载的所有文件系统，然后再对系统盘打快照并创建自定义镜像，否则有可能造成以该自定义镜像  * 创建的ECS实例不能启动或使用。
  * `请勿随意升级内核或操作系统版本`。
  * 请勿调整系统盘分区。系统盘目前只支持单个根分区。
  * 请检查系统盘使用剩余空间，确保系统盘没有被写满。
  * 请勿修改关键系统文件，如 /sbin、/bin、/lib 目录等。
  * 请勿修改默认登录用户名 root。
2. [使用实例创建自定义镜像](https://help.aliyun.com/document_detail/35109.html)
## 5.9 安全组
### 5.9.3 安全组默认规则
https://help.aliyun.com/document_detail/31707.html
> 默认安全组中的默认规则仅设置针对ICMP协义、SSH 22端口、RDP 3389端口、HTTP 80端口和HTTPS 443端口的入方向规则
### 5.9.4 创建安全组
https://help.aliyun.com/document_detail/25468.html
* `一台ECS实例必须至少属于一个安全组`。
* VPC里的安全组，可以跨交换机，但是不能跨VPC。
## 5.12 云助手
### 5.12.1 创建命令
https://help.aliyun.com/document_detail/87012.html
> 云助手命令可以在ECS实例中快速完成运行自动化运维脚本、轮询进程、重置用户密码、安装或者卸载软件、更新应用以及安装补丁等一些日常任务。命令类型可以是Windows PoweShell脚本、Bat批处理命令和Linux Shell脚本。
> 使用限制
  * 在一个阿里云地域下，您`最多能创建100条云助手命令`。
  * `创建的脚本在Base64编码后大小不能超过16KB`。
## 5.14 标签
https://help.aliyun.com/document_detail/25477.html
> 您可以在 ECS 控制台上为这些资源绑定标签：`ECS 实例、存储（包括云盘和共享块存储）、快照、镜像和安全组`。
> 标签有以下限制：
  * 每个标签都由一对键值对（Key-Value Pair）组成。
  * `每个实例最多可以绑定20个标签，每次最多绑定或解绑20个标签`。
  * 每个资源的任一标签的标签键（Key）必须唯一，相同标签键（Key）的标签会被覆盖。
  * 每个地域中的标签信息不互通，例如在华东 1 地域创建的标签在华东 2 地域不可见。
  * `解绑标签时，如果解绑之后该标签已经没有绑定的资源，则该标签会自动被删除`。
## 5.15 运维与监控
### 5.15.1 监控
https://help.aliyun.com/document_detail/25482.html
目前，您可以`通过ECS自带监控服务和云监控服务监控实例`。ECS自带监控服务提供`vCPU使用率、网络流量和磁盘I/O监控`。云监控提供更加精细化的监控粒度，更多详情，请参阅监控项说明。
# 6. 最佳实践
## 6.1 安全
### 6.1.4 ECS数据安全最佳实践
https://help.aliyun.com/document_detail/51404.html
### 6.1.5 如何提高ECS实例的安全性
https://help.aliyun.com/document_detail/51849.html
* 一般可以通过设置安全组、AntiDDoS、态势感知、安装安骑士、接入Web应用防火墙等方式提高ECS实例的安全性。
> AntiDDoS
  * 阿里云云盾可以防护`SYN Flood，UDP Flood，ACK Flood，ICMP Flood，DNS Flood，CC攻击等3到7层DDoS的攻击`
  * DDoS基础防护免费为阿里云用户提供最高5G的默认DDoS防护能力。
# 8. API 参考 
## 8.3 快速入门
### 8.3.2 请求结构
https://help.aliyun.com/document_detail/25489.html
> https://ecs.aliyuncs.com/?Action=CreateSnapshot&DiskId=1033-60053321&<公共请求参数>
  * https指定了请求通信协议。
  * ecs.aliyuncs.com指定了ECS的服务接入地址（Endpoint）。
  * Action=CreateSnapshot指定了要调用的API，DiskId=1033-60053321是CreateSnapshot规定的参数。
  * <公共请求参数>是系统规定的公共参数。
### 8.3.5 返回结果
> https://help.aliyun.com/document_detail/25491.html
  * 返回结果主要有 `XML 和 JSON` 两种格式，`默认为 XML`，您可以指定公共请求参数 Format 变更返回结果的格式。更多详情，请参阅 公共参数。为了便于查看和美观，API 文档返回示例均有换行和缩进等处理，实际返回结果无换行和缩进处理。
## 8.7 磁盘
### 8.7.4 AttachDisk
> 调用该接口时，您需要注意：
  * 待挂载的ECS实例的状态必须为运行中（Running）或者已停止（Stopped）。
  * 挂载数据盘时，云盘的状态必须为待挂载（Available）。
  * 必须三个字段：`Action、InstanceId、DiskId`
## 8.8 镜像
### 8.8.1 CreateImage
https://help.aliyun.com/document_detail/25535.html
> 通过这种方法创建自定义镜像时，您需要注意：
  * 只能指定一个系统盘快照，`系统盘的设备名必须为/dev/xvda`。
  * 可以指定多个数据盘快照，`数据盘设备名默认由系统有序分配，从/dev/xvdb依次排序到/dev/xvdz，不能重复`。
# 10. 常见问题
## 10.2 功能相关
### 10.2.2 块存储
1. [ECS云服务器磁盘FAQ](https://help.aliyun.com/knowledge_detail/40558.html)
> 云服务器磁盘I/O速度是多少？
  * 普通云盘写一般在 20-30MB/s，读一般在 80-100MB/s。
  * 本地SSD盘512KB顺序读写应用，可提供高达300MB/s的吞吐量能力。
> Linux 购买了数据盘，但是系统中看不到怎么办？
  * Linux 数据需要分区-格式化-挂载后才能使用和看到空间，挂载数据盘参考 格式化和挂载数据盘。
2. [ECS系统盘和数据盘二次分区FAQ](https://help.aliyun.com/knowledge_detail/40566.html)
> 系统盘能否再次划分出一个分区用作数据存储？
  * 出于系统安全和稳定性考虑，`阿里云官方不支持系统盘二次分区`，不管是Windows还是Linux。`如果用户强行使用第三方工具进行二次分区操作，可能引发未知风险`，如系统崩溃，数据丢失等。
3. [扩容系统盘FAQ](https://help.aliyun.com/knowledge_detail/40568.html)
  > 1. 所有块存储都支持系统盘扩容吗？有地域限制吗？
    * 新购普通云盘、高效云盘、SSD云盘、本地SSD盘等块存储在新购时能选择系统盘的容量。
    * 存量的普通云盘、高效云盘、SSD云盘作系统盘，更换系统盘时，您能重新选择系统盘的容量。
    * 所有的地域都支持扩容系统盘。
  > 8. 系统盘扩容之后是否支持再缩容？
    * 系统盘扩容之后不支持再缩容。
### 10.2.3 快照
> 1. [快照回滚规则 FAQ](https://help.aliyun.com/knowledge_detail/40576.html)
  * 1. 磁盘无快照是否能够回滚或数据恢复？
    * 不能。后方的回滚、数据恢复操作都是基于快照进行的，如果无磁盘快照，则无法恢复数据。
  * 2. 快照回滚能否单独回滚某个分区或部分数据？
    * 不能。快照回滚是`针对整块磁盘`某个时间点的状态，而`不是某个分区或目录`。
  * 3. 系统盘快照回滚是否会影响数据盘？
    * 不影响。`快照回滚是针对单块磁盘进行的，不影响未回滚的其他磁盘`。
  * 4. 更换系统后，快照能否回滚？
    * 不能。更换系统后，原系统的快照不支持回滚到新系统上。但数据盘快照可以正常回滚。
  * 5. 在回滚快照前，有哪些注意事项？
    * 快照回滚前，强烈建议先做手动快照备份，以便意外时进行恢复或数据提取。
### 10.2.4 镜像
https://help.aliyun.com/knowledge_detail/40609.html
> 使用自定义镜像创建ECS实例时，以下原因会导致挂载磁盘失败：
  * 创建的实例没有数据盘
  * 数据盘是新磁盘，还没有进行分区格式化
  * 创建的自定义镜像没有去除/etc/fstab中磁盘挂载的条目
> [复制镜像FAQ](https://help.aliyun.com/knowledge_detail/40569.html)
  * 1. 什么情况下需要复制镜像？
    * `自定义镜像只能在同一个地域使用，不能直接跨地域使用`。如果您需要：
      * 将云服务器ECS上的应用部署在多个地域。
      * 将云服务器ECS迁移到其他地域。
      * 跨地域使用自定义镜像。
        * 可以通过复制镜像解决。`您可以复制当前地域的自定义镜像到其他地域的同账号中`，在其他地域使用自定义镜像实现一致性部署应用环境。
  * 2. 可以复制哪些镜像？
    * `复制镜像只支持自定义镜像`。不支持公共镜像，镜像市场镜像和别人共享给您的镜像。
  * 7. 怎么复制我的云账号的镜像资源到其他阿里云账号的其他地域？
    * 复制自己的镜像到目标地域。
    * 将该镜像共享给对方的云账号。
    * 对方云账号的共享镜像列表中会显示该镜像。
  * 8. 复制镜像有镜像容量限制吗？
    * 没有限制。但是，复制容量超过500 GiB时需要提交工单申请，当您在控制台单击复制镜像时，控制台会提示您提交工单申请。
### 10.2.5 安全组
1. [安全组使用 FAQ](https://help.aliyun.com/knowledge_detail/40570.html)
> 什么是安全组？
  * 安全组是一种虚拟防火墙。用于设置单台或多台云服务器的网络访问控制，它是重要的网络安全隔离手段，您可以在云端划分安全域。
  * `每个实例至少属于一个安全组`，在创建的时候就需要指定。`同一安全组内的实例之间网络互通，不同安全组的实例之间默认内网不通，可以授权两个安全组之间互访`。
2. [安全组新使用限制 FAQ](https://help.aliyun.com/knowledge_detail/87018.html)  
> 可以调整安全组规则的数量上限吗？
  * 不可以，`每个安全组最多可以包含 100 条安全组规则`。
  * 目前，一个实例中的每个弹性网卡默认`最多可以加入 5 个安全组`，所以一个实例的每个弹性网卡最多可以包含 500 条安全组规则，能够满足绝大多数场景的需求。
> 为何实例加入安全组时出现超限提示？
  * `作用于一台实例（主网卡）的安全组规则数量上限` = 该实例允许加入的安全组数量 x 每个安全组最大规则数量。
3. [ECS安全组中规则的优先级执行匹配顺序说明](https://help.aliyun.com/knowledge_detail/40642.html)
  * 服务器只有一个安全组
    * 两条优先级相同的规则，先判断第一条规则是否符合，不符合的情况下再判断是否符合第二条
    * `优先级数字小的级别高，数字大的级别低`
### 10.2.6 网络 
[BGP机房介绍](https://help.aliyun.com/knowledge_detail/40677.html)
使用BGP协议互联后，网络运营商的所有骨干路 由设备将会判断到IDC机房IP段的最佳路由，以保证不同网络运营商用户的高速访问
### 10.2.8 其他
> [中国大陆用户购买其他国家和地区实例资源 FAQ](https://help.aliyun.com/knowledge_detail/50274.html)
  * 14. 可否将中国大陆地域的实例迁移到其它国家和地区呢？
    * `很抱歉，实例的地域和可用区无法变更。如果您需要在其它国家和地区使用实例，您需要重新购买实例`。
### 10.2.9 云助手FAQ
10. 执行记录存在哪些执行状态？
> 单次命令在一台实例上存在以下4种状态：
  * 执行中（Running）：命令正在目标实例中执行，或等待周期性计划执行。
  * 手动停止（Stopped）：您主动停止命令执行后产生的状态。
  * 执行完成（Finished）：命令在目标实例上执行完成，不代表执行结果成功与否。
  * 执行失败（Failed）：命令进程过了超时时间后，因为各种原因未执行完成。
> 单次命令在多台实例上存在以下5种状态：
  * 执行中（Running）：至少有一台实例在执行中。
  * 手动停止（Stopped）：所有实例均在`稳定状态`，且都是手动停止。
  * 执行完成（Finished）：所有实例均在稳定状态，且都是执行完成或停止。
  * 执行失败（Failed）：所有实例均在稳定状态，且都是执行失败。
  * 部分失败（PartialFailed）：所有实例均在稳定状态，且有部分是执行失败。
> 周期命令存在以下2种状态：
  * 周期执行中（Running）：至少有一台实例等待周期性命令执行或正在执行。
  * 手动停止（Stopped）：所有实例均在稳定状态，且都是手动停止。
## 10.3 操作运维Linux
### 10.3.4 远程登录SSH
1. [云服务器 ECS Linux SSH 无法远程登录问题排查指引](https://help.aliyun.com/knowledge_detail/41470.html)
2. [SSH 无法远程登录问题的处理思路](https://help.aliyun.com/knowledge_detail/52955.html)
### 10.3.6 系统配置
1. [如何避免升级 Linux 实例内核后无法启动](https://help.aliyun.com/knowledge_detail/59360.html)
  * 阿里云`不建议随意自行升级内核`，请参阅文档 ECS使用须知。
## 10.4 操作运维Windows
### 10.4.1 操作系统类问题
1. [配置 Windows 系统虚拟内存](https://help.aliyun.com/knowledge_detail/40995.html)
  * `增加虚拟内存会导致磁盘I/O性能下降`。如果您的云服务器ECS内存资源不足，如非必要，阿里云建议您通过升级实例规格（CPU + 内存）来解决。
# 11 APP用户指南
## 11.4 快照
### 11.4.2 回滚云盘
https://help.aliyun.com/document_detail/50511.html
> 回滚磁盘前必须确认以下信息：
  * 您已经为云盘 创建了快照，而且要回滚的云盘当前没有正在创建的快照。
  * 云盘未被释放。
  * `云盘必须已经 挂载到某台ECS实例上，而且已经 停止实例`。
# 14 通用参考 
## 14.1 地域和可用区
https://help.aliyun.com/document_detail/40654.html
> 可用区是指`在同一地域内，电力和网络互相独立的物理区域`。同一可用区内实例之间的网络延时更小。
> `在同一地域内可用区与可用区之间内网互通`，可用区之间能做到故障隔离。是否将实例放在同一可用区内，主要取决于对容灾能力和网络延时的要求。
  * 如果您的应用需要较高的容灾能力，建议您将实例部署在同一地域的不同可用区内。
  * 如果您的应用要求实例之间的网络时延较低，则建议您将实例创建在同一可用区内。