

# 第 8 章 服务调用

## 8.1  几个误区

### 8.1.1 NIO就是异步服务

* NIO优点
  * 所有IO都是非阻塞
  * 多路复用的Reactor线程模型

### 8.1.2 服务调用天生就是同步的

* 服务调用模式
  * OneWay模式：只有请求，没有应答，例如消息通知
  * 请求-应答模式

### 8.1.3 异步服务调用性能更高

## 8.2 服务调用方式

### 8.2.1 同步服务调用

* 同步调用
  * 消费者调用服务端
  * 消费者wait()，同步阻塞等待应答
  * 服务端应答消费者
  * notify阻塞的业务线程

### 8.2.2 异步服务调用

* 异步服务调用
  * listener
    * 扩展JDK的Future，提供Future-Listener机制
    * 支持主动获取和被动异步回调通知
    * 循环调用监听器的operationComplete
  * 不添加listener
    * 用户连续发起N次服务调用
    * 依次获取Future对象，主动get结果

### 8.2.3 并行服务调用

* 并行
  * JDK7的Fork/Join
  * BPM的Parrallel Gateway
  * 批量串行服务调用

### 8.2.4 泛化调用

* 泛化调用模式
  * 泛化引用
  * 泛化实现