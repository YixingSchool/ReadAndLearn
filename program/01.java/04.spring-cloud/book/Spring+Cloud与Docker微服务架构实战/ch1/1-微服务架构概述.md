

# 1 微服务架构概述

## 1.1 单体应用架构存在的问题

* 单体应用：一个归档包包含所有功能的应用程序
  * 复杂性高：依赖关系不清晰
  * 技术债务：越积越多，不坏不修
  * 部署频率低：变更或缺陷需要全量重新部署整个应用，部署频率低导致大量的功能变更和缺陷修复，出错概率高
  * 可靠性差：单个模块出错导致整个应用崩溃
  * 扩展能力受限：单体应用智能作为一个整体进行扩展
  * 阻碍技术创新：统一的技术解决所有的问题

## 1.2 如何解决单体应用架构存在的问题

## 1.3 什么是微服务

* 微服务特性
  * 微服务可独立运行在进程里
  * 一系列微服务共同构建整个系统
  * 每个服务为独立的业务开发
  * 微服务通过轻量通信协议通信
  * 使用不同开发语言和数据存储技术
  * 全自动部署机制

## 1.4 微服务架构的优点与挑战

* 优点
  * 易于开发和维护
  * 单个微服务启动快
  * 局部易部署
  * 技术栈不受限
  * 按需收缩
* 缺点
  * 运维要求高
  * 分布式带来复杂性
  * 调整接口成本高：调整所有使用该接口的微服务
  * 重复劳动：重复使用相同的功能

## 1.5 微服务设计原则


* 设计原则
  * 单一职责原则：只关注整个系统功能中单独、有界限的一部分
  * 服务自治原则：从开发、测试、构建、部署，都可独立运行，不依赖其他服务
  * 轻量级通信机制：体量轻、跨语言、跨平台。REST、AMQP、STOMP、MQTT
  * 微服务粒度
    * 因为业务复杂性不同，代码量不能作为划分的依据
    * 可参考领域驱动设计（Domain Driven Desgin，DDD）中的“界限上下文（Bounded Context）”

## 1.6 如何实现微服务架构

* 选型
  * 微服务开发框架：Spring Cloud、Dubbo、Dropwizard、Armada
  * 运行平台：微服务不绑定运行平台
* 组件
  * 服务发现
  * 服务网关
  * 配置服务器